#jinja2:lstrip_blocks: True
---

fullnameOverride: dashboard

extraArgs:
  - --system-banner="{{ organization }} / {{ context }}"

service:
  externalPort: 80

ingress:
  enabled: true
  annotations:
    cert-manager.io/cluster-issuer: "{{ 'selfsigned' if local else 'letsencrypt' }}"
  hosts:
    - "dashboard.{{ domain }}"
  paths:
    - /
  tls:
    - secretName: dashboard-tls-certificate
      hosts:
        - "dashboard.{{ domain }}"

settings:
  clusterName: "{{ context }}"
  itemsPerPage: "{{ dashboard_items_per_page }}"
  disableAccessDeniedNotifications: "{{ dashboard_disable_notifications }}"

pinnedCRDs:
  {% if components.certmanager.enabled %}
  - kind: customresourcedefinition
    name: certificates.cert-manager.io
    displayName: cert-manager/certificates
    namespaced: true
  - kind: customresourcedefinition
    name: clusterissuers.cert-manager.io
    displayName: cert-manager/clusterissuers
    namespaced: false
  {% endif %}

metricsScraper:
  enabled: true

rbac:
  clusterReadOnlyRole: "{{ dashboard_readonly }}"
